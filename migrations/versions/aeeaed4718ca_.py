"""empty message

Revision ID: aeeaed4718ca
Revises: 1c78a9dd073b
Create Date: 2019-07-18 16:54:15.429856

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision = 'aeeaed4718ca'
down_revision = '1c78a9dd073b'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('cdm_labels',
    sa.Column('script_labels', sa.String(length=256), nullable=False),
    sa.Column('english_labels', sa.String(length=256), nullable=False),
    sa.Column('is_calculated', sa.Boolean(), nullable=False),
    sa.Column('is_required', sa.Boolean(), nullable=False),
    sa.Column('is_unique', sa.Boolean(), nullable=False),
    sa.Column('datatype', sa.Enum('dt_boolean', 'dt_date', 'dt_datetime', 'dt_varchar', 'dt_float', 'dt_int', 'dt_blob', name='datatype'), nullable=False),
    sa.Column('regex', sa.String(length=256), nullable=False),
    sa.PrimaryKeyConstraint('script_labels')
    )
    op.add_column('client_models', sa.Column('status', sa.Enum('active', 'inactive', 'pending', name='activity'), server_default='pending', nullable=False))
    op.drop_column('client_models', 'is_active')
    op.add_column('data_mappings', sa.Column('cdm_label_script_label', sa.String(length=256), nullable=False))
    op.create_foreign_key(None, 'data_mappings', 'cdm_labels', ['cdm_label_script_label'], ['script_labels'])
    op.drop_column('data_mappings', 'is_required')
    op.drop_column('data_mappings', 'cdm_label')
    op.drop_column('data_mappings', 'is_unique')
    op.drop_column('data_mappings', 'regex')
    op.add_column('industry_models', sa.Column('status', sa.Enum('active', 'inactive', 'pending', name='activity'), server_default='pending', nullable=False))
    op.drop_column('industry_models', 'is_active')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('industry_models', sa.Column('is_active', postgresql.ENUM('active', 'inactive', 'pending', name='activity'), server_default=sa.text("'pending'::activity"), autoincrement=False, nullable=False))
    op.drop_column('industry_models', 'status')
    op.add_column('data_mappings', sa.Column('regex', sa.VARCHAR(length=256), autoincrement=False, nullable=False))
    op.add_column('data_mappings', sa.Column('is_unique', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False))
    op.add_column('data_mappings', sa.Column('cdm_label', postgresql.ENUM('potato', name='cdm_label'), autoincrement=False, nullable=False))
    op.add_column('data_mappings', sa.Column('is_required', sa.BOOLEAN(), server_default=sa.text('false'), autoincrement=False, nullable=False))
    op.drop_constraint(None, 'data_mappings', type_='foreignkey')
    op.drop_column('data_mappings', 'cdm_label_script_label')
    op.add_column('client_models', sa.Column('is_active', postgresql.ENUM('active', 'inactive', 'pending', name='activity'), server_default=sa.text("'pending'::activity"), autoincrement=False, nullable=False))
    op.drop_column('client_models', 'status')
    op.drop_table('cdm_labels')
    # ### end Alembic commands ###
